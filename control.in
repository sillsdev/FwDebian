#if COMMENT
// This file will be first processed by the C preprocessor and then by the cmake configure_file
// command. The result is a database version specific control file.
#endif
Source: lfmerge-fdo-@DatabaseVersion@
Section: Libraries
Priority: extra
Maintainer: Eberhard Beilharz <eb1@sil.org>
Build-Depends:
 cdbs, debhelper (>= 7.0.50~), autotools-dev,
 pkg-config,
 libtool, automake, autoconf,
 desktop-file-utils,
 gawk, unzip, tofrodos, libpython2.7,
 libgtkmm-2.4-dev, uuid-dev,
 xutils-dev,
 libboost-test-dev,
 mono-sil, libgdiplus-sil, gtk-sharp2-sil, mono-basic-sil,
 cli-common-dev,
 libenchant-dev,
 libxklavier-dev,
 docbook2x, gzip,
 wget,
 xsltproc,
 fieldworks-enc-converters
Standards-Version: 3.9.5
Homepage: http://fieldworks.sil.org/

#if COMMENT
// Exclude lfmerge-fdo and lfmerge-fdo-data for all but the latest model version
#endif

#if __DatabaseVersion__ == __MaxDbVersion__

#if COMMENT
// We explicitly list the different db model packages here, so that building for an older
// version still keeps the dependency on the newer model version package.
#endif
Package: lfmerge-fdo
Architecture: any
Depends:
 lfmerge-fdo-7000068,
 lfmerge-fdo-7000069,
 lfmerge-fdo-7000070,
 lfmerge-fdo-@DatabaseVersion@ (>= ${binary:Version})
Description: LanguageForge Send/Receive
 lfmerge is a tool that is used by the LanguageForge server
 to share data with language depot. Since this tool makes assumptions
 about the location and content of files it is probably not very useful
 outside of languageforge development and should probably not be
 installed.
 .
 This metapackage installs the different database specific versions.
#endif

Package: lfmerge-fdo-@DatabaseVersion@
Architecture: any
Depends:
 ${shlibs:Depends}, ${misc:Depends},
 xsltproc,
 udisks | udisks2,
 adduser (>= 3.11),
 mono-sil (>= 3.4.0-10),
 lfmerge-fdo-data (>= ${binary:Version}) | fieldworks-applications
Conflicts:
 libfieldworks-fdo-@DatabaseVersion@
Replaces:
 libfieldworks-fdo-@DatabaseVersion@
Breaks:
 libfieldworks-fdo-@DatabaseVersion@
Description: LanguageForge Send/Receive
 lfmerge is a tool that is used by the LanguageForge server
 to share data with language depot. Since this tool makes assumptions
 about the location and content of files it is probably not very useful
 outside of languageforge development and should probably not be
 installed.
 .
 This required package contains the FDO (FieldWorks data objects) library
 for database version @DatabaseVersion@.

#if __DatabaseVersion__ == __MaxDbVersion__
Package: lfmerge-fdo-data
Architecture: any
Depends:
 ${shlibs:Depends}, ${misc:Depends}
Conflicts:
 fieldworks-applications
Breaks:
 fieldworks-applications
Description: LanguageForge Send/Receive
 lfmerge is a tool that is used by the LanguageForge server
 to share data with language depot. Since this tool makes assumptions
 about the location and content of files it is probably not very useful
 outside of languageforge development and should probably not be
 installed.
 .
 This package contains data files that are identical to the ones installed by
 FieldWorks.
#else
Package: lfmerge-fdo-dummy
Architecture: any
Depends:
 ${shlibs:Depends}, ${misc:Depends}
Description: LanguageForge Send/Receive
 lfmerge is a tool that is used by the LanguageForge server
 to share data with language depot. Since this tool makes assumptions
 about the location and content of files it is probably not very useful
 outside of languageforge development and should probably not be
 installed.
 .
 This package is a dummy package and can be ignored.
#endif